/**
 * @name angular-7segments
 * @version v0.1.0
 * @author Taewoo Kim xodn4195@gmail.com
 * @license MIT
 */
!function(t,e){function i(t){return t&&t.$evalAsync&&t.$watch}function n(t){return t&&t.window===t}function s(t,e){var s=e;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?s=void 0:n(e)?s="$WINDOW":e&&document===e?s="$DOCUMENT":i(e)&&(s="$SCOPE"),s}function r(t){var i=[];return JSON.stringify(t,function(t,n){if(n=s(t,n),e.isObject(n)){if(i.indexOf(n)>=0)return"...";i.push(n)}return n})}function o(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):e.isUndefined(t)?"undefined":"string"!=typeof t?r(t):t}function a(t,e){return e=e||Error,function(){var i=2,n=arguments,s=n[0],r="["+(t?t+":":"")+s+"] ",a=n[1];return r+=a.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1),s=e+i;return s<n.length?o(n[s]):t}),new e(r)}}function g(t){var i={strict:"E",require:"^ngModel",scope:{segVal:"=ngModel",segDigitOptions:"="},templateUrl:"digit.html",link:function(i,n,s,r){i.opt=e.extend({},t.defaults.digit,i.segDigitOptions),n.addClass("seven-seg-digit-wrapper"),n.css("width",i.opt.width+"px"),n.css("height",i.opt.height+"px")}};return i}function l(t){var i={strict:"E",require:"^ngModel",scope:{segOptions:"=",segDigitOptions:"=",segArr:"=ngModel"},templateUrl:"group.html",link:function(i){function n(e,n){try{i.digits=t.arrToSegGroup(e,n)}catch(s){i.digits=[]}}var s=e.copy(t.defaults.group);i.$watch("segArr",function(t){n(t,s)});var r=i.$watchCollection("segOptions",function(t){e.extend(s,t),n(i.segArr,s),s.watch||r()})}};return i}function d(){return function(t,e){return t&e}}function u(){var t=this;this.defaults={digit:{width:75,height:150,onClass:"seven-seg-on",digitClass:"seven-seg-digit"},group:{align:void 0,watch:void 0}},this.$get=["segMap",function(i){function n(){var n=this;this.isDot=function(t){return"."===t||t===i["."]},this.arrToSegGroup=function(t,s){if(!e.isArray(t)&&!e.isString(t))throw new p("badarrtype","The type '{0}' is not supported.",typeof t);if(s.size<0)throw new p("badsize","The size '{0}' cannot be negative.",s.size);for(var r=[],o=0,a=void 0===s.size?t.length:s.size,g=0,l=t.length;l>g&&a>o;o++,g++){var d=t[g]||0;if(n.isDot(d)){var u=t[g-1];void 0===u||n.isDot(u)?r[o]=i["."]:r[--o]|=i["."]}else if(e.isString(d))r[o]=i[d];else{if(!e.isNumber(d))throw new p("baditemtype","The type '{0}' is not supported.",typeof d);r[o]=d}}return n.isDot(t[g])&&(r[o-1]|=i["."]),a=void 0===s.size?o:s.size,void 0===s.align||"right"===s.align?new Array(a-o).concat(r):r.concat(new Array(a-o))},this.arrToSegNum=function(t){if(!e.isArray(t)&&!e.isString(t))throw new p("badarrtype","The type '{0}' is not supported.",typeof t);for(var i=1,n=0,s=0,r=8;r>s;i<<=1,s++)t[s]&&"0"!=t[s]&&(n|=i);return n},this.segNumToArr=function(t,e){var i=1;t=t||0;for(var n=void 0==e?t:t^e,s=[],r=0;8>r;i<<=1,r++)i&n&&(s[r]=!!(i&t));return s},this.defaults=t.defaults}return new n}]}g.$inject=["segment"];a("segGroup");l.$inject=["segment"];var c={1:6,2:91,3:79,4:102,5:109,6:125,7:39,8:127,9:111,0:63,"-":64,_:8,".":128," ":0,S:109,E:121,G:61},p=a("segment");e.module("wo.7segments",[]).directive("segDigit",g).directive("segGroup",l).value("segMap",c).filter("bitAnd",d).provider("segment",u).run(["$document",function(t){var e=t[0].querySelector("head"),i=t[0].createElement("style");i.innerHTML=".seven-seg-digit{ fill: #320000; overflow: hidden;stroke-width: 0; height: 100%; width: 100%; background-color: Black;}.seven-seg-on{fill:red;}.seven-seg-digit-wrapper{display:inline-block;}",e.appendChild(i)}]);e.module("wo.7segments").run(["$templateCache",function(t){t.put("digit.html",'<svg data-ng-class="opt.digitClass" viewBox="0 0 57 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false"> <defs> <polyline id="h-part" points="11 0, 37 0, 42 5, 37 10, 11 10, 6 5"></polyline> <polyline id="v-part" points="0 11, 5 6, 10 11, 10 34, 5 39, 0 34"></polyline> </defs> <g> <use xlink:href="#h-part" x="0" y="0" data-ng-class="(segVal | bitAnd : 1) && opt.onClass"></use> <use xlink:href="#v-part" x="-48" y="0" transform="scale(-1,1)" data-ng-class="(segVal | bitAnd : 2)  && opt.onClass"></use> <use xlink:href="#v-part" x="-48" y="-80" transform="scale(-1,-1)" data-ng-class="(segVal | bitAnd : 4) && opt.onClass"></use> <use xlink:href="#h-part" x="0" y="70" data-ng-class="(segVal | bitAnd : 8) && opt.onClass"></use> <use xlink:href="#v-part" x="0" y="-80" transform="scale(1,-1)" data-ng-class="(segVal | bitAnd : 16) && opt.onClass"></use> <use xlink:href="#v-part" x="0" y="0" data-ng-class="(segVal | bitAnd : 32) && opt.onClass"></use> <use xlink:href="#h-part" x="0" y="35" data-ng-class="(segVal | bitAnd : 64) && opt.onClass"></use> <circle cx="52" cy="75" r="5" data-ng-class="(segVal | bitAnd : 128) && opt.onClass"></circle> </g> </svg>'),t.put("group.html",'<div data-ng-repeat="dig in digits track by $index" seg-digit data-ng-model="dig" seg-digit-options="segDigitOptions"> </div>')}])}(window,window.angular);