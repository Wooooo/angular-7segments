/**
 * @name angular-7segments
 * @version v0.2.0
 * @author Taewoo Kim xodn4195@gmail.com
 * @license MIT
 */
!function(e,t){function n(e){return e&&e.$evalAsync&&e.$watch}function i(e){return e&&e.window===e}function s(e,t){var s=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?s=void 0:i(t)?s="$WINDOW":t&&document===t?s="$DOCUMENT":n(t)&&(s="$SCOPE"),s}function r(e){var n=[];return JSON.stringify(e,function(e,i){if(i=s(e,i),t.isObject(i)){if(n.indexOf(i)>=0)return"...";n.push(i)}return i})}function o(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):t.isUndefined(e)?"undefined":"string"!=typeof e?r(e):e}function a(e,t){return t=t||Error,function(){var n=2,i=arguments,s=i[0],r="["+(e?e+":":"")+s+"] ",a=i[1];return r+=a.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),s=t+n;return s<i.length?o(i[s]):e}),new t(r)}}function g(e){var n={strict:"E",require:"^ngModel",scope:{segVal:"=ngModel",segDigitOptions:"="},templateUrl:"digit.html",link:function(n,i,s,r){n.opt=t.extend({},e.defaults.digit,n.segDigitOptions),i.addClass("seven-seg-digit-wrapper"),i.css("width",n.opt.width+"px"),i.css("height",n.opt.height+"px")}};return n}function l(e){var n={strict:"E",require:"ngModel",scope:{segOptions:"=",segDigitOptions:"=",segArr:"=ngModel"},templateUrl:"group.html",link:function(n,i){function s(t,i){try{n.digits=e.arrToSegGroup(t,i)}catch(s){n.digits=[]}}i.addClass("seven-seg-group");var r=t.copy(e.defaults.group);n.$watch("segArr",function(e){s(e,r)});var o=n.$watchCollection("segOptions",function(e){t.extend(r,e),s(n.segArr,r),r.watch||o()})}};return n}function d(){return function(e,t){return e&t}}function u(){var e=this;this.defaults={digit:{width:75,height:150,onClass:"seven-seg-on",digitClass:"seven-seg-digit"},group:{align:void 0,watch:void 0}},this.$get=["segMap",function(n){function i(){var i=this;this.isDot=function(e){return"."===e||e===n["."]},this.arrToSegGroup=function(e,s){if(!t.isArray(e)&&!t.isString(e))throw new p("badarrtype","The type '{0}' is not supported.",typeof e);if(s.size<0)throw new p("badsize","The size '{0}' cannot be negative.",s.size);for(var r=[],o=0,a=void 0===s.size?e.length:s.size,g=0,l=e.length;l>g&&a>o;o++,g++){var d=e[g]||0;if(i.isDot(d)){var u=e[g-1];void 0===u||i.isDot(u)?r[o]=n["."]:r[--o]|=n["."]}else if(t.isString(d))r[o]=n[d];else{if(!t.isNumber(d))throw new p("baditemtype","The type '{0}' is not supported.",typeof d);r[o]=d}}return i.isDot(e[g])&&(r[o-1]|=n["."]),a=void 0===s.size?o:s.size,void 0===s.align||"right"===s.align?new Array(a-o).concat(r):r.concat(new Array(a-o))},this.arrToSegNum=function(e){if(!t.isArray(e)&&!t.isString(e))throw new p("badarrtype","The type '{0}' is not supported.",typeof e);for(var n=1,i=0,s=0,r=8;r>s;n<<=1,s++)e[s]&&"0"!=e[s]&&(i|=n);return i},this.segNumToArr=function(e,t){var n=1;e=e||0;for(var i=void 0==t?e:e^t,s=[],r=0;8>r;n<<=1,r++)n&i&&(s[r]=!!(n&e));return s},this.defaults=e.defaults}return new i}]}g.$inject=["segment"];a("segGroup");l.$inject=["segment"];var c={1:6,2:91,3:79,4:102,5:109,6:125,7:39,8:127,9:111,0:63,"-":64,_:8,".":128," ":0,S:109,E:121,G:61},p=a("segment");t.module("wo.7segments",[]).directive("segDigit",g).directive("segGroup",l).value("segMap",c).filter("bitAnd",d).provider("segment",u).run(["$document",function(e){var t=e[0].querySelector("head"),n=e[0].createElement("style");n.innerHTML=".seven-seg-digit{ fill: #320000; overflow: hidden;stroke-width: 0; height: 100%; width: 100%; background-color: Black;}.seven-seg-on{fill:red;}.seven-seg-digit-wrapper{display:inline-block;}",t.appendChild(n)}]);t.module("wo.7segments").run(["$templateCache",function(e){e.put("digit.html",'<svg data-ng-class="opt.digitClass" viewBox="0 0 57 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false"> <defs> <polyline id="h-part" points="11 0, 37 0, 42 5, 37 10, 11 10, 6 5"></polyline> <polyline id="v-part" points="0 11, 5 6, 10 11, 10 34, 5 39, 0 34"></polyline> </defs> <g> <use xlink:href="#h-part" x="0" y="0" data-ng-class="(segVal | bitAnd : 1) && opt.onClass"></use> <use xlink:href="#v-part" x="-48" y="0" transform="scale(-1,1)" data-ng-class="(segVal | bitAnd : 2)  && opt.onClass"></use> <use xlink:href="#v-part" x="-48" y="-80" transform="scale(-1,-1)" data-ng-class="(segVal | bitAnd : 4) && opt.onClass"></use> <use xlink:href="#h-part" x="0" y="70" data-ng-class="(segVal | bitAnd : 8) && opt.onClass"></use> <use xlink:href="#v-part" x="0" y="-80" transform="scale(1,-1)" data-ng-class="(segVal | bitAnd : 16) && opt.onClass"></use> <use xlink:href="#v-part" x="0" y="0" data-ng-class="(segVal | bitAnd : 32) && opt.onClass"></use> <use xlink:href="#h-part" x="0" y="35" data-ng-class="(segVal | bitAnd : 64) && opt.onClass"></use> <circle cx="52" cy="75" r="5" data-ng-class="(segVal | bitAnd : 128) && opt.onClass"></circle> </g> </svg>'),e.put("group.html",'<div data-ng-repeat="dig in digits track by $index" seg-digit data-ng-model="dig" seg-digit-options="segDigitOptions"> </div>')}])}(window,window.angular);