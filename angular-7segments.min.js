/**
 * @name angular-7segments
 * @version v0.0.1
 * @author Taewoo Kim xodn4195@gmail.com
 * @license MIT
 */
!function(e,t){function n(e){return e&&e.$evalAsync&&e.$watch}function i(e){return e&&e.window===e}function r(e,t){var r=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:i(t)?r="$WINDOW":t&&document===t?r="$DOCUMENT":n(t)&&(r="$SCOPE"),r}function s(e){var n=[];return JSON.stringify(e,function(e,i){if(i=r(e,i),t.isObject(i)){if(n.indexOf(i)>=0)return"...";n.push(i)}return i})}function a(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):t.isUndefined(e)?"undefined":"string"!=typeof e?s(e):e}function o(e,t){return t=t||Error,function(){var n=2,i=arguments,r=i[0],s="["+(e?e+":":"")+r+"] ",o=i[1];return s+=o.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),r=t+n;return r<i.length?a(i[r]):e}),new t(s)}}function l(e){var t={strict:"E",require:"^ngModel",scope:{segVal:"=ngModel",onNames:"="},templateUrl:"digit.html",link:function(e,t,n,i){e.defaultOnName=e.defaultOnName||"seven-seg-on"}};return t}function g(e){var t={strict:"E",scope:{segVal:"@"},templateUrl:"digit.html"};return t}function d(e){var t={strict:"E",require:"^ngModel",scope:{segOptions:"=",segArr:"=ngModel"},templateUrl:"group.html",link:function(t,n,i){function r(n,i){t.digits=e.arrToSegGroup(n,i.size),t.emptyArr=new Array(void 0===i.size?0:i.size-t.digits.length)}var s=t.segOptions||(t.segOptions={});r(t.segArr,s),t.wrapperStyle={width:(s.width||75)+"px",height:(s.height||150)+"px"},t.$watch("segArr",function(e){r(e,s)}),t.segOptions.watch&&t.$watchCollection("segOptions",function(e){r(t.digits,e)})}};return t}function u(){return function(e,t){return e&t}}function c(e){var n=this;this.isDot=function(t){return"."===t||t===e["."]},this.arrToSegGroup=function(i,r){if(!t.isArray(i)&&!t.isString(i))throw new f("badarrtype","The type '{0}' is not supported.",typeof i);var s=[],a=0;r||(r=i.length);for(var o=0,l=i.length;l>o&&r>a;a++,o++){var g=i[o]||0;if(n.isDot(g)){var d=i[o-1];void 0===d||n.isDot(d)?s[a]=e["."]:s[--a]|=e["."]}else if(t.isString(g))s[a]=e[g];else{if(!t.isNumber(g))throw new f("baditemtype","The type '{0}' is not supported.",typeof g);s[a]=g}}return s},this.arrToSegNum=function(e){if(!t.isArray(e)&&!t.isString(e))throw new f("badarrtype","The type '{0}' is not supported.",typeof e);for(var n=1,i=0,r=0,s=8;s>r;n<<=1,r++)e[r]&&"0"!=e[r]&&(i+=n);return i},this.segNumToArr=function(e,t){var n=1;e=e||0;for(var i=void 0==t?e:e^t,r=[],s=0;8>s;n<<=1,s++)n&i&&(r[s]=!!(n&e));return r}}l.$inject=["segUtil"],g.$inject=["segUtil"];o("segGroup");d.$inject=["segUtil"];var p={1:6,2:91,3:79,4:102,5:109,6:125,7:39,8:127,9:111,0:63,"-":64,_:8,".":128," ":0,S:109,E:121,G:61},f=o("segutil");c.$inject=["segMap"];t.module("wo.7segments",[]).directive("segDigit",l).directive("segDigitOnce",g).directive("segGroup",d).value("segMap",p).service("segUtil",c).filter("bitAnd",u).run(["$document",function(e){var t=e[0].querySelector("head"),n=e[0].createElement("style");n.innerHTML=".seven-seg-digit{ fill: #320000; overflow: hidden;stroke-width: 0; height: 100%; width: 100%; background-color: Black;}.seven-seg-on{fill:red;}.seven-seg-digit-wrapper{display:inline-block;}",t.appendChild(n)}]);t.module("wo.7segments").run(["$templateCache",function(e){e.put("digit.html",'<svg class="seven-seg-digit" viewBox="0 0 57 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false"> <defs> <polyline id="h-part" points="11 0, 37 0, 42 5, 37 10, 11 10, 6 5"></polyline> <polyline id="v-part" points="0 11, 5 6, 10 11, 10 34, 5 39, 0 34"></polyline> </defs> <g class="seven-seg-group"> <use xlink:href="#h-part" x="0" y="0" data-ng-class="(segVal | bitAnd : 1) && (onNames[0] || defaultOnName)"></use> <use xlink:href="#v-part" x="-48" y="0" transform="scale(-1,1)" data-ng-class="(segVal | bitAnd : 2)  && (onNames[1] || defaultOnName)"></use> <use xlink:href="#v-part" x="-48" y="-80" transform="scale(-1,-1)" data-ng-class="(segVal | bitAnd : 4) && (onNames[2] || defaultOnName)"></use> <use xlink:href="#h-part" x="0" y="70" data-ng-class="(segVal | bitAnd : 8) && (onNames[3] || defaultOnName)"></use> <use xlink:href="#v-part" x="0" y="-80" transform="scale(1,-1)" data-ng-class="(segVal | bitAnd : 16) && (onNames[4] || defaultOnName)"></use> <use xlink:href="#v-part" x="0" y="0" data-ng-class="(segVal | bitAnd : 32) && (onNames[5] || defaultOnName)"></use> <use xlink:href="#h-part" x="0" y="35" data-ng-class="(segVal | bitAnd : 64) && (onNames[6] || defaultOnName)"></use> <circle cx="52" cy="75" r="5" data-ng-class="(segVal | bitAnd : 128) && (onNames[7] || defaultOnName)"></circle> </g> </svg>'),e.put("group.html",'<div data-ng-if="!segOptions.align" class="seven-seg-digit-wrapper" data-ng-style="wrapperStyle" data-ng-repeat="i in emptyArr track by $index" seg-digit-once seg-val="0"></div><div class="seven-seg-digit-wrapper" data-ng-style="wrapperStyle" data-ng-repeat="dig in digits track by $index" seg-digit data-ng-model="dig"></div><div data-ng-if="segOptions.align" class="seven-seg-digit-wrapper" data-ng-style="wrapperStyle" data-ng-repeat="i in emptyArr track by $index" seg-digit-once seg-val="0"></div>')}])}(window,window.angular);